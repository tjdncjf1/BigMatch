<!-- 
   Program    : home.html
   Date       : 2016-04-07
   Description: BigMatch 홈 화면.
   Modify     : 서우철
   History    :   - 2016-04-07 작성자 : 서우철
                   * 모듈화 작업.(각 기능을 따로 html로 뺌)
                  - 2016-04-20 작성자 : 서우철
                   * swipe 기능 추가. 
                   * record, recommend, more, myPage 페이지 home.html로 추합.
 -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>home</title>
<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"> -->
<link rel="stylesheet" href="../lib/jquery.mobile-1.4.5/jquery.mobile-1.4.5.css">
<!-- Link Swiper's CSS -->
<link rel="stylesheet" href="../lib/swiper/css/swiper.css">
<!-- record page css -->
<link rel="stylesheet" href="../lib/css/record.css">
<!-- swiper css -->
<link rel="stylesheet" href="../lib/css/home_swiper.css">
<!-- more page css -->
<link rel="stylesheet" href="../lib/css/more.css">
<!-- toast css -->
<!-- <link rel="stylesheet" href="../lib/css/toastr.css" /> -->
<link rel="stylesheet" href="../lib/css/jquery.toast.css" />
<style>
body {
	margin: 0;
    padding: 0;
}
</style>
</head>
<body>
	<div class="swiper-container">
        <div class="swiper-wrapper">
        
        	<!-- 추천화면 -->
        	<div class="swiper-slide" id="recommend">
        		<div data-role="tabs" id="tabs">
					<div data-role="navbar">
						<ul>
							<li><a href="#one" data-ajax="false">one</a></li>
							<li><a href="#two" data-ajax="false">two</a></li>
						</ul>
					</div>
					<div id="one" class="ui-body-d ui-content" style="padding: 0em">
						<div data-role="collapsibleset" data-content-theme="a"
							data-iconpos="right" id="set">
							<div data-role="collapsible" data-collapsed="true">
								<h3>Section 1</h3>
								<p>I'm the collapsible content.</p>
							</div>
						</div>
					</div>
					<div id="two" class="ui-body-d ui-content" style="padding: 0em">
						<div data-role="collapsibleset" data-content-theme="a"
							data-iconpos="right" id="set">
							<div data-role="collapsible" data-collapsed="true">
								<h3>Section 2</h3>
								<p>I'm the collapsible content.</p>
							</div>
						</div>
					</div>
				</div>
        	</div><!-- swiper-slide -->
        	
        	<!-- 기록화면 -->
        	<div class="swiper-slide" id="record">
        		<div data-role="tabs" id="tabs">
					<div data-role="navbar">
						<ul>
							<li id="moveMatchResult"><a href="#matchRecord" class="ui-link ui-btn ui-tabs-anchor ui-btn-active" data-ajax="false">대전기록</a></li>
							<li id="moveRanking"><a href="#rank" data-ajax="false">랭킹</a></li>
						</ul>
					</div>
					
					<!-- 대전기록 page -->
					<div id="matchRecord" class="ui-body-d ui-content" style="padding: 0em">
						<div class="ui-grid-a">
							<div class="ui-grid-solo">
								<div class="ui-block-a" id="matchResultList">

								</div>
							</div>
						</div>
					</div> <!-- end of #matchRecord -->
					
					<!-- 2016-04-11~12 작업: 서우철 -->
					<!-- 랭크 -->
					<div id="rank" class="ui-body-d ui-content">
						<!-- 간단한 rank 보여주기 part -->
						<div style="position: absolute; right:47%; width: 53%;">
							<img src="../lib/images/home/goldTrophy.png" id="trophyImg"/>
						</div>
						<div style="float: right;">
							<span class="rankInfo"><span>3구</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span id="3ballScore">456위 1승 1패 (50%)</span></span><br/>
							<span class="rankInfo"><span>4구</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span id="4ballScore">1234위 0승 0패 (%)</span></span><br/>
							<span class="rankInfo" style="right:9%;"><span>포켓볼</span> &nbsp;&nbsp; <span id="poolScore">232승 0패 (100%)</span></span><br/>
							<input type="button" data-inline="true" value="공유" />
						</div>
						
						<!-- 3구, 4구, 포켓볼 radio button part -->
						<div style="position: absolute; top:108%; left:0%;">
							<form>
								<fieldset id="evetTypeRadio" data-role="controlgroup" data-type="horizontal">
									<input type="radio" name="radio-choice-h-2" id="radio-choice-h-2a" checked="checked">
									<label for="radio-choice-h-2a" id="evet3ball">3구</label>
									<input type="radio" name="radio-choice-h-2" id="radio-choice-h-2b">
									<label for="radio-choice-h-2b" id="evet4ball">4구</label>
									<input type="radio" name="radio-choice-h-2" id="radio-choice-h-2c">
									<label for="radio-choice-h-2c" id="evetPool">포켓볼</label>
								</fieldset>
							</form>
						</div>
						
						<!-- 2016-04-12 작성자 : 서우철 -->
						<!-- 랭킹 상세 list -->
						<div style="position: absolute; top:137%; left:0%;">
							<ul id="rankList" data-role="listview">
								<!-- <li><img src="../lib/images/home/goldTrophy.png" class="rankTrophy">당구신</li>
								<li><img src="../lib/images/home/silverTrophy.png" class="rankTrophy">타이피스트</li>
								<li><img src="../lib/images/home/bronzeTrophy.png" class="rankTrophy">닉넴</li>
								<li><span>4. 서우철</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>53승 1무 1패(98%)</span></li> -->
							</ul>
						</div>
							
					</div> <!-- end of #rank -->
				</div> <!-- end of #tabs -->
        	</div><!-- swiper-slide -->

			<!-- 홈화면 -->        	
        	<div class="swiper-slide"  id="homePage">
				<div class="ui-grid-a">
					<div class="ui-block-a">
						<a class="ui-shadow ui-btn ui-corner-all" href="userInfo.html">
						<img alt="user" src="../lib/images/home/smile.png" width="50%"><br>
						<font id="userNik_text"  style="font-size: 15pt"></font></a>
					</div>
					<div class="ui-block-b">
						<a class="ui-shadow ui-btn ui-corner-all" href="#moveRanking">
						<img alt="rank" src="../lib/images/home/trophy.png" width="50%"><br>
						<font style="font-size: 15pt">Rank</font></a>
					</div>
				</div>
				<div class="ui-grid-b">
					<div class="ui-block-a">
						<a id="3ball_bt" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" href="../matchlist/matchMap.html" data-ajax="false">
							<img alt="3ball" src="../lib/images/home/3ball.png" width="80%"><br>
							<font style="font-size: 15pt">3구</font>
						</a>
					</div>
					<div class="ui-block-b">
						<a class="ui-btn ui-corner-all ui-shadow ui-btn-inline" href="../matchlist/matchMap.html" data-ajax="false">
							<img alt="4ball" src="../lib/images/home/4ball.png" width="80%"><br>
							<font style="font-size: 15pt">4구</font>
						</a>
					</div>
					<div class="ui-block-c">
						<a class="ui-btn ui-corner-all ui-shadow ui-btn-inline" href="../matchlist/matchMap.html" data-ajax="false">
							<img alt="pocketball" src="../lib/images/home/pocketball.png" width="80%"><br>
							<font style="font-size: 15pt">포켓볼</font>
						</a>
					</div>
				</div>
				
				<a class="ui-btn ui-shadow"	onclick="dupCheckBT()" data-ajax="false">
					<font style="font-size: 12pt">대전 등록!</font>
				</a>
				
				<a class="ui-btn ui-shadow" href="#">
					<font style="font-size: 12pt">빠른 대전!</font>
				</a> 
			</div> <!-- swiper-slide -->
			
			<!-- matching 페이지 -->
			<div class="swiper-slide" id="matchingPage">
				<div data-role="tabs" id="tabs">
					<div data-role="navbar">
						<ul>
							<li><a class="ui-btn-active" href="#matchPush">매치 알림</a></li>
							<!-- <li><a href="#myInfo">내 정보</a></li> -->
						</ul>
					</div>
					<div id="matchPage_div">

						<!-- 등록자, 신청자 둘다 아닐때 -->
						<div id="POSSIBLE_div" style="display:none">
							<font size=24pt> 진행중인<br>대전이 없습니다.
							</font> <a><img src="../lib/images/home/question.png"></a>
						</div>

						<!-- 등록만 한 상태 -->
                  		<div id="BASE_div" style="display:none">
                     		<table border=0 cellspacing=0 cellpadding=0 width=100% style="display: block; border: 4px solid #E3E3E3;">
                        <tr>
                           <td align=center width=150 height=100><br> <img
                              src="../lib/images/home/my.png" width="100%" /></td>
                           <td><br>
                              <table border=0 cellspacing=0 cellpadding=1>

                                 <tr>
                                    <td width=15% valign=middle><img
                                       src="../lib/images/home/my.png" width="30%" /></td>
                                    <td width=45% valign=middle>
                                    <font id="m_nickName" style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #8E8E8E; line-height: 120%">
                                          </font></td>
                                    <td width=15% valign=middle>
                                    <img src="../lib/images/home/pin.png" width="30%"></td>
                                    <td width=25% valign=middle><font
                                       style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #8E8E8E; line-height: 120%">
                                          600점 </font></td>
                                 </tr>

                                 <tr>
                                    <td align=left valign=middle><img
                                       src="../lib/images/home/pin.png" width="30%" /></td>
                                    <td align=left valign=middle>
                                    <font id="m_location" style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #8E8E8E; line-height: 120%">
                                          </font></td>
                                 </tr>

                                 <tr>
                                    <td valign=middle><img
                                       src="../lib/images/home/watch.png" width="30%" /></td>
                                    <td valign=middle>
                                    <a><font id="m_time" style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #8E8E8E; line-height: 120%"></font></a></td>
                                 </tr>

                                 <tr>
                                    <td align=left valign=middle><font
                                       style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #3E3E3A; line-height: 120%">
                                          <img src="../lib/images/home/dama.png" width="20%" />
                                    </font></td>
                                    <td align=left valign=middle>
                                    <font id="m_dama" style="font-family: 맑은 고딕, tahoma, Vrinda, 굴림, arial; font-size: 9pt; color: #8E8E8E; line-height: 120%">
                                          </font></td>
                                 </tr>
                              </table> <br></td>
                        </tr>

                     </table>
                     <div data-role="collapsible" data-iconpos="right">
                        <h3>대전정보 보기</h3>
                        <p>제목 : <font id="m_title"></font></p>
                        <br>
                        <font id="m_desc"></font>
                     </div>
                     
                     <div id="REGISTERED_div" align="center">
                           <button id="m_updateMatch">수정</button>
                           <button id="m_deleteMatch" >등록 대전 삭제</button>
                     </div>
                     
                     <div id="EXISTENCE_div" align="center">
                          <button id="m_cancleMatch" style=" width: 30%;">매칭 거절하기</button>
                          <button style=" width: 30%;">상대와 대화하기</button>
                          <p>결과입력하기</p>
                          <button data-role="none">승 리</button>
                          <button data-role="none">무승부</button>
                          <button data-role="none">패 배</button>
                      </div>
                  
                  </div>

               </div>

            </div>
         </div>
         <!-- // mathch end -->

			<!-- swiper-slide -->

			<!-- 더보기 페이지 -->
			<div class="swiper-slide" id="morePage">
				<div class="ui-content" role="main">
					<ul data-role="listview" data-theme="a" data-dividertheme="e">
						<li data-role="list-divider">설정</li>
						<li><a href="#" onclick="moveMyInfo()">내 정보</a></li>
						<li id="textBar"><strong id="textBox">위치 제공 동의</strong> <select
							name="locationAgreement" id="locationAgreement"
							data-role="slider" data-mini="true">
								<option value="off">Off</option>
								<option value="on">On</option>
						</select></li>
						<li id="textBar"><strong id="textBox">알림 설정</strong> <select
							name="alarmSetting" id="alarmSetting" data-role="slider"
							data-mini="true">
								<option value="off">Off</option>
								<option value="on">On</option>
						</select></li>
						<li data-role="list-divider">고객도움말</li>
						<li><a href="#">문의사항 & 오류신고</a></li>
						<li><a href="#">공지사항</a></li>
						<li data-role="list-divider">정보</li>
						<li><a href="#">프로그램 정보</a></li>
						<li><a href="#">이용가이드</a></li>
					</ul>
				</div><!-- /content -->
			</div> <!-- swiper-slide -->
		</div> <!-- swiper-wrapper -->
		
		<!-- 하단에 네비게이션바 -->
		<div class="swiper-pagination"></div>
		
	</div> <!-- swiper-container -->
	
<script src="../lib/jquery/jquery.js"></script>
<script src="../lib/swiper/js/swiper.js"></script>
<script src="../lib/jquery.mobile-1.4.5/jquery.mobile-1.4.5.js"></script>
<script src="../lib/js/home_matchInfo.js"></script>
<!-- 스와이프시 dupcheck event -->
<script src="../lib/js/dupCheckSwipe.js"></script>
<script src="../lib/js/dupCheckBT.js"></script>
<!-- 공통 필드 모아놓은 js -->
<script src="../lib/js/common.js"></script>
<!-- view화면이 바뀔때마다 ajax 요청 모아놓은 js -->
<script src="../lib/js/changeView.js"></script>
<!-- swiper 속성 수정한 js -->
<script src="../lib/js/home_swiper.js"></script>
<script type="text/javascript" src="../lib/js/jquery.toast.js"></script>

<script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=6b3b4d0c9762531403442ab0ac98dd84&libraries=services"></script><!-- 다음 로그인 조민호 -->
<!-- <script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=35281aceab086c0a7cccadc0b4963623&libraries=services"></script> --> <!-- 카카오톡 로그인 서우철 -->
<!-- <script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=5e4670f48de878e5bf6bd8cddfddb40a&libraries=services"></script> --><!-- 다음 로그인 임현우 -->
<!-- <script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=9080e1a934aab4b455f480ca93a0c7f5&libraries=services"></script> --> <!--다음 로그인 정승택 -->

<script type="text/javascript">
	
	<!--  loacl storage 에 저장된 userseq  -->
	var userseq = localStorage.getItem('userseq');
	console.log('userseq : '+userseq);
	var evetType = 'THREE';
	
	// 내 정보보기 클릭 시 이동.
	function moveMyInfo() {
		location.href="userInfo.html";
	}

	// 수정하기 클릭 시 이동.
	function moveMatchingInfo() {
		location.href="../matchlist/updateMatch.html";
	}
	
	// url뒤에 view 값이 있다면 처음 페이지 로딩 시 보여줄 화면이 달라짐.
	if(location.href.split('?')[1] != undefined) {
		console.log('view :: ' + location.href.split('?')[1].split('&')[0].split('=')[1]);
		view = location.href.split('?')[1].split('&')[0].split('=')[1];
	}
	
	// view(home.html을 리로딩시 처음 보여주는 화면아이디)를 뭐 보여주냐에 따라 ajax 요청.
	if(view == 1) {
		
	} else if(view == 2) {
		searchUserNickName();
	} else if(view == 3) {
		searchUserNickName();
		dupCheckSwipe();
		if(location.href.split('?')[1].split('&')[1] != undefined) {
			console.log('toastBoolean :: ' + location.href.split('?')[1].split('&')[1].split('=')[1]);
			$.toast({
   	   		    //heading: 'Error',
   	   		    text: '대전 결과를 입력해주세요',
   	   			position: 'bottom-left',
   	   		    icon: 'error',
   	   		  	textAlign: 'center'
  			});
			//view = 2;
		}
	}
	
	// home 에서 -> 왼쪽스와이프시 
	$('#homePage').bind("swipeleft",function(){
		dupCheckSwipe();
	});
	// home 에서 -> 왼쪽스와이프시 
	$('#homePage').bind("swiperight",function(){
		matchResultView();
		rankListView();
	});
	
	// matching page에서 <- 오른쪽스와이프시 
	$('#matchingPage').bind("swiperight",function(){
		searchUserNickName();
	});
	
	// more page에서 <- 오른쪽스와이프시 
	$('#morePage').bind("swiperight",function(){
		dupCheckSwipe();
	});
	
	// 대전기록 tab 클릭시 ajax 요청
	$('#moveMatchResult').bind('click', function(){
		$('#rankList').empty();
		matchResultView();
	});
	
	// record 페이지에서 왼쪽 스와이프시
	$('#record').bind('swipeleft', function(){
		searchUserNickName();
	});
	
	/* 랭킹 tab 클릭시 ajax 요청 */
	$('#moveRanking').bind('click', function(){
		evetType = 'THREE';
		rankListView();
	});
	
	$('#evet3ball').bind('click', function(){
		evetType = 'THREE';
		rankListView();
	});
	$('#evet4ball').bind('click', function(){
		evetType = 'FOUR';
		rankListView();
	});
	$('#evetPool').bind('click', function(){
		evetType = 'POOL';
		rankListView();
	});
	/////////////////////////////////////
	
	$('#updateBt').bind('click', function(){
		moveMatchingInfo();
	});
		
	
	
	
</script>
</body>
</html>
