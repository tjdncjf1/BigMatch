<!DOCTYPE html>
<!-- 
Program     :addMatch.html
Date        : 2016-04-07
Description : 매칭 들록 UI
Modify      : 정승택
History     : - 2016-04-07 작성자 : 조민호 
                * UI 수정  포기 ㅠㅠ
              - 2016-04-15 수정자 : 임현우
              	* UI에 위치등록 추가 및 UI 다듬기, 지도 팝업 추가
              - 2016-04-18 수정자 : 임현우
              	* 매치등록을 DB에 접근.
-->

<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>add</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<style>
#title {
	padding-left: 4%;
	padding-right: 4%;
}
#description {
	padding-left: 4%;
	padding-right: 4%;
}
#level {
	padding-left: 4%;
	padding-right: 4%;
}
iframe {
	border: none;
}
.*{
	width:92%;
}
</style>
</head>
<body>
	<div data-role="header" data-position="fixed" data-theme="a">
		<a href="../" data-rel="back"
			class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l">Back</a>
		<h1>대전 등록</h1>
	</div>

	<form>
		<div align="center" id="title">
			<label for="textinput-hide" class="ui-hidden-accessible">Title</label>
			<input type="text" name="matchingTitle" id="matchingTitle"
				placeholder="제목을 입력하세요.">
		</div>

		<div align="center">
			<fieldset data-role="controlgroup" data-type="horizontal">
				<!--<legend>종목</legend>-->
				<input type="radio" name="eventType" id="radio-choice-h-2a"
					value="EVT001" checked="checked"> <label
					for="radio-choice-h-2a">3 구</label> <input type="radio"
					name="eventType" id="radio-choice-h-2b" value="EVT002"> <label
					for="radio-choice-h-2b">4 구</label> <input type="radio"
					name="eventType" id="radio-choice-h-2c" value="EVT003"> <label
					for="radio-choice-h-2c">포켓볼</label>
			</fieldset>
		</div>

		<div align="center">
			<fieldset data-role="controlgroup" data-type="horizontal">
				<input type="radio" name="memberCount" id="1-choice-h-2a" value="1"
					checked="checked"> <label for="1-choice-h-2a">1 : 1</label>
				<input type="radio" name="memberCount" id="1-choice-h-2b" value="2">
				<label for="1-choice-h-2b">2 : 2</label> <input type="radio"
					name="memberCount" id="1-choice-h-2c" value="3"> <label
					for="1-choice-h-2c">3 : 3</label>
			</fieldset>
		</div>

		<div id="level" style="width: 92%">
			<select name="level" id="select-choice-a" data-native-menu="false">
				<option>희망상대실력</option>
				<option value="30">30이하</option>
				<option value="50">50</option>
				<option value="80">80</option>
				<option value="100">100</option>
				<option value="120">120</option>
				<option value="150">150</option>
				<option value="200">200</option>
				<option value="250">250</option>
				<option value="300">300이상</option>
			</select>
		</div>

		<script type="text/javascript">
			// popup창 close function()
			function popupClose() {
				console.log("도착했다!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
				$('#popupMap').popup('close');
			}
		</script>

		<div align="center">
			<a href="#popupMap" data-rel="popup" data-position-to="window"
				class="ui-btn ui-corner-all ui-shadow ui-btn-inline">위치 등록</a>
			<div data-role="popup" id="popupMap" data-overlay-theme="a"
				data-theme="a" data-corners="false" data-tolerance="15,15">
				<a href="#" data-rel="back"
					class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-a ui-icon-delete 
	    		ui-btn-icon-notext ui-btn-right">Close</a>
				<iframe src="registerMap.html" width="90%" height="90%" seamless=""></iframe>
			</div>
		</div>

		<!--------------------------------------------------------------------------------------->

		<div id="description" align="center">
			<textarea cols="40" rows="8" name="description" id="textarea-6"
				placeholder="간단한 내용을 입력하세요"></textarea>
		</div>

		<div id="input" align="center">
			<input type="submit" id="registerMatch" data-inline="true" value="등록하기!">
		</div>
	</form>
	
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script	src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<!-- 공통 자바스크립트 -->
<script src="../lib/js/common.js" ></script> 
<!-- 팝업 -->
<script src="../lib/js/popup.js" ></script>

<script type="text/javascript">

	$(function() {
		
		console.log(location.search);
		
		$('form').on('submit', function(event) {
			event.preventDefault(); // 디폴트 이벤트 제거
			
			console.log($('#matchingTitle').val()); //제목
			console.log($('input[name="eventType"]:checked:checked').val()); //경기타입
			console.log($('input[name="memberCount"]:checked:checked').val()); //멤버수
			console.log($('select[name="level"]').val()); //희망상대실력
			console.log($('#textarea-6').val()); //간단한 내용
			
			$.ajax({
				url: baseUrl + '/match.do',
				method:'POST',
				dataType:'json',
				headers: { 
					'Accept' : 'application/json',
					'Content-Type' : 'application/json'
				},
				data : JSON.stringify({
					matchingTitle		: $('#matchingTitle').val(),
					eventTypeCd			: $('input[name="eventType"]:checked:checked').val(),
					memberCount			: $('input[name="memberCount"]:checked:checked').val(),
					targetStartLevel	: $('select[name="level"]').val(),
					matchingDesc		: $('#textarea-6').val()
				}),
				success : function(event) {
					if(event.result == 'SUCCESS') {
						alert('매치 등록 성공');
						//location.href = "matchlist.html";
					} else {
						alert('매치 등록 실패');
					}
				}
			});
		});		
	});
</script>



</body>
</html>