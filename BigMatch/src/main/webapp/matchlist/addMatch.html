<!-- 
Program     :addMatch.html
Date        : 2016-04-07
Description : 매칭 들록 UI
Modify      : 정승택
History     : - 2016-04-07 작성자 : 조민호 
                * UI 수정  포기 ㅠㅠ
              - 2016-04-15 수정자 : 임현우
              	* UI에 위치등록 추가 및 UI 다듬기, 지도 팝업 추가
              - 2016-04-18 수정자 : 임현우
              	* 매치등록을 DB에 접근한다.
-->


<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>add</title>
<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script
	src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<style>
#title {
	padding-left: 4%;
	padding-right: 4%;
}

#level {
	margin-left: 4%;
	margn-right: 4%;	
}


#matchingDescription {
	padding-left: 4%;
	padding-right: 4%;
}

iframe {
    border: none;
}

. {
	width: 92%;
}

</style>

</head>

<body>
	<div data-role="header" data-position="fixed" data-theme="a">
		<a href="../" data-rel="back"
			class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l">Back</a>
		<h1>대전 등록</h1>
	</div>


	<div id="title" align="center">
		<label for="textinput-hide" class="ui-hidden-accessible">Title</label>
		<input type="text" name="matchingTitle" id="matchingTitle"
			placeholder="제목을 입력하세요.">
	</div>


	<div align="center">
		<form>
			<fieldset data-role="controlgroup" data-type="horizontal">
				<!--<legend>종목</legend>-->
				<input type="radio" name="eventType" id="radio-choice-h-2a" value="EVT001" checked="checked">
				<label for="radio-choice-h-2a">3  구</label>
				<input type="radio" name="eventType" id="radio-choice-h-2b" value="EVT002">
				<label for="radio-choice-h-2b">4  구</label>
				<input type="radio" name="eventType" id="radio-choice-h-2c" value="EVT003">
				<label for="radio-choice-h-2c">포켓볼</label>
			</fieldset>
		</form>
	</div>



	<div align="center">
		<form>
			<fieldset data-role="controlgroup" data-type="horizontal">
				<input type="radio" name="memberCount" id="1-choice-h-2a" value="1" checked="checked">
				<label for="1-choice-h-2a">1 : 1</label>
				<input type="radio" name="memberCount" id="1-choice-h-2b" value="2">
				<label for="1-choice-h-2b">2 : 2</label> 
				<input type="radio" name="memberCount" id="1-choice-h-2c" value="3">
				<label for="1-choice-h-2c">3 : 3</label>
			</fieldset>
		</form>
	</div>

		<div id="level" style="width:92%">
			<!--<label for="select-choice-a" class="select">희망상대실력</label>-->
			<select name="level" id="select-choice-a"
				data-native-menu="false">
				<option>희망상대실력</option>
				<option value="30">30이하</option>
				<option value="50">50</option>
				<option value="80">80</option>
				<option value="100">100</option>
				<option value="120">120</option>
				<option value="150">150</option>
				<option value="200">200</option>
				<option value="250">250</option>
				<option value="300">300이상</option>
			</select>
		</div>


		<div align="center">
			<a href="#popupMap" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline">위치 등록</a>
			<div data-role="popup" id="popupMap" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">
	    		<a href="#" data-rel="back" class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
	    		<iframe src="registerMap.html" width="80%" height="80%" seamless=""></iframe>
			</div>
		</div>
		
		<!--------------------------------------------------------------------------------------->

	
		
	

	<div id="description" align="center">
		<form>
			<!--<label for="textarea-1">내용</label>
<textarea name="textarea-1" id="textarea-1"></textarea>-->

			<!--<label for="textarea-6">Textarea:</label>-->
			    
			<textarea cols="40" rows="8" name="description" id="textarea-6"
				placeholder="간단한 내용을 입력하세요"></textarea>
		</form>
	</div>


	<div id="input" align="center">
		<form>
			<input type="submit" data-inline="true" value="입력">
			<div class="ui-input-btn ui-btn ui-btn-inline">
				취소 <input type="button" data-enhanced="true" value="Enhanced">
			</div>
		</form>
	</div>
	
	
	
	
	
	<script type="text/javascript">
	// popup examples
$( document ).on( "pagecreate", function() {
    // The window width and height are decreased by 30 to take the tolerance of 15 pixels at each side into account
    function scale( width, height, padding, border ) {
        var scrWidth = $( window ).width() - 30,
            scrHeight = $( window ).height() - 30,
            ifrPadding = 2 * padding,
            ifrBorder = 2 * border,
            ifrWidth = width + ifrPadding + ifrBorder,
            ifrHeight = height + ifrPadding + ifrBorder,
            h, w;
        if ( ifrWidth < scrWidth && ifrHeight < scrHeight ) {
            w = ifrWidth;
            h = ifrHeight;
        } else if ( ( ifrWidth / scrWidth ) > ( ifrHeight / scrHeight ) ) {
            w = scrWidth;
            h = ( scrWidth / ifrWidth ) * ifrHeight;
        } else {
            h = scrHeight;
            w = ( scrHeight / ifrHeight ) * ifrWidth;
        }
        return {
            'width': w - ( ifrPadding + ifrBorder ),
            'height': h - ( ifrPadding + ifrBorder )
        };
    };
    $( ".ui-popup iframe" )
        .attr( "width", 0 )
        .attr( "height", "auto" );
    $( "#popupMap iframe" ).contents().find( "#map_canvas" )
        .css( { "width" : 0, "height" : 0 } );
    $( "#popupMap" ).on({
        popupbeforeposition: function() {
            var size = scale( 600, 800, 0, 1 ),
                w = size.width,
                h = size.height;
            $( "#popupMap iframe" )
                .attr( "width", w )
                .attr( "height", h );
            $( "#popupMap iframe" ).contents().find( "#map_canvas" )
                .css( { "width": w, "height" : h } );
        },
        popupafterclose: function() {
            $( "#popupMap iframe" )
                .attr( "width", 0 )
                .attr( "height", 0 );
            $( "#popupMap iframe" ).contents().find( "#map_canvas" )
                .css( { "width": 0, "height" : 0 } );
        }
    });
});

</script>



<script type="text/javascript">

console.log($('input[name="eventType"]:checked:checked').val());
console.log($('#textarea-6').val());

$.ajax({
	url:'/match.do',
	method:'POST',
	dataType:'json',
	headers: { 
		"Accept" : "application/json",
		"Content-Type" : "application/json"
	},
	data : JSON.stringify({
		matchingTitle	: $('#title').val(),
		eventTypeCd		: $('input[name="eventType"]:checked:checked').val(),
		memberCount		: $('input[name="memberCount"]:checked:checked').val(),
		targetStartLevel: $('select[name="level"]').val(),
		matchingDesc	: $('#textarea-6').val()
	}),
	success : function(event) {
		//location.href = "matchlist.html";
	}
});

</script>

</body>
</html>